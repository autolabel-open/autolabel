import base64
import random
import time

import requests


# 方法1：直接读取图片文件并转换为base64
def image_to_base64(image_path):
    with open(image_path, "rb") as image_file:
        encoded_string = base64.b64encode(image_file.read())
        return encoded_string.decode("utf-8")  # 转为字符串


start_time = time.time()

target_url = "http://192.168.123.3"

epoch = 0
while True:
    epoch += 1
    cur_time = time.time()
    runtime = cur_time - start_time
    if runtime < epoch:
        time.sleep(epoch - (cur_time - start_time))

    # 正常行为
    res1 = requests.get(f"{target_url}")
    # res2 = requests.get(f"{target_url}/api/index.php/v1/users")

    print(res1.text)
    # print(res2.text)
